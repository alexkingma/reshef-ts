recreate RoD

goal:
  recreate as much of reshef as possible, excluding some minor balancing/duel mechanics aspects
  all graphics/sounds/plot stuff should be as accurate as possible

rough order of tasks:
  headless duel engine (dump game state in console)
  duel UI
  world exploration (shop, deck editing, challenge different players/sprites, etc.)
  basic opponent AI (make two versions: one with canon AI, one with actual smart AI)
  create a line of all (major) duellists at all stages of the game, effectively a practice tool with no fluff/dialogue/cutscenes
  pit the duellists against each other to determine their Elo, including new and old AI versions
  recreate dialogue/events/cutscenes/plot (VERY low priority)

eventual improvements over original game:
	no cursor/effect monster spam
	can sell last card in trunk
	remove unsellable cards from shop sell menu
	cards sell for 25% of buy price instead of 5%
	place SoRL and field spells on field
	rebalance cost of cards (not purely determined by the higher of atk/def)
	prevent discarding from hand (or maybe just don't send discarded cards to graveyard, delete them outright)
	show opponent hand when panning up
	allow deck to go above 40 cards while editing it (and to go up to 60 if desired? why not if you have the DC for it?)
	rebalance DC/DL given by harder duellists
	make bonz 1 a wasteland field
	prevent starting a new game from deleting save data
	alignment gives 500 atk/def bonus, not isntakill effect
	setting def mode and failing to attack during SoRL doesn't lock card with "E" state
	remove intro logos
	fiend bonuses grant 2-300 atk/def instead of multiplying
	code system is replaced by a brochure (another "shop" interface) that lets you browse all cards and "buy" them into the shop for a function of their price (~20%)
  make type/effects of monsters more accurate
  make spell/trap effects more accurate
  lp is restored after each duel
  move default zone selection to the middle of the board, or as close as possible while still empty
  use the actual art for cards, especially in close-up combat shots
  show burn card LP drop animation, as though doing a direct attack
eventual/complex ideas:
  expand graveyard to be more than one card
  allow more than 5 cards in hand
  move field spells to their own zone
  notify player when cards they ordered have arrived at the shop (once a variable number of duels have transpired, scaling vaguely on cost/rarity of card)

major chunks of game state:
  duel -- see above
  player -- dl/dc, money, deck/trunk contents, coords/dirFacing
  trunk -- viewMode (atk/def, align, cost, etc.), sortOrder, cursorIdx
  shop -- cards in stock, sortKey, cursorPos
  world -- story/plot flags, available locations, npcs (coords/dirFacing, who has been duelled, conversation flags)

-------------------------------------------------------------------

todo summary:
  start-of-turn isn't checked for effects    
    add a isStartOfTurn flag to the activeTurn state
    it gets set every time endTurn is called
    each time update is called, this flag determines if we check startOfTurn or perpetual auto effects
  are there places where i need to know whose turn it is?
    if so, add a prop to state so i know if it's self/foe turn
    prefer adding vars to state over fracturing condition logic outside of the reducer files
  trap card effects/reducer map
    FINAL cards auto destroy if F is not on the board
  scheduling system, to inform about timed future events
    SoRL -- active for 5 additional turns (counting both players' turns) after the current turn, then destroy
    brain control -- active for the current turn only
  message log
    doubles as a history of the duel, and also as a text prompt in gba mode
    just an array of { originZoneCoords, msgBlueprint, isCleared }
    when gba mode needs to suspend the game to show text:
      read the text into a var, replace any placeholders with card data
        (don't think there will be much of this, all the messages are pretty generic)
      render however much of it fits on the screen at once
      when its all finished, dispatch a clearMessage
      when there are no further uncleared messages in the log, the game flow resumes
    in pc mode, the text is just dumped in messager form on the side somewhere

--------------------------------------------------------------------


types of effects:
  manual
  auto
    time of activation
      perpetual
      start of own turn
      start of foe turn
    location-specific
      monsterZone (95% of monsters)
      spellZone (all spells/traps)
      graveyard (like 5 monsters?)
      hand (just lava golem)



order of effects (left to right):
  [start of turn text]
  [draw card]
  check auto effects (active turn, then other player; start at idx 0):
    graveyard
    monsters
    spells
    hand

example update ordering:
  use FD
  UI shows spell text (text is pushed to a message log that has to be rendered/processed)
  dispatch of spell activation goes through, all cards are destroyed except slifer
  update is called
    for each card on the field/hand/gy:
      if a card with a valid auto effect (order to check is important; see above) is found:
        UI shows effect text/prompt
        a monster/spell effect dispatch of the relevant spell is fired off
        all temppowerups are reset and recalculated

